<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>tomdoc.sh by mlafeldt</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">tomdoc.sh</h1>
        <p class="header">Parse TomDoc'd shell scripts and generate pretty documentation from it</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/mlafeldt/tomdoc.sh/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/mlafeldt/tomdoc.sh/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/mlafeldt/tomdoc.sh">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/mlafeldt">mlafeldt</a></p>


      </header>
      <section>
        <h1>tomdoc.sh</h1>

<p>tomdoc.sh will parse <a href="http://tomdoc.org">TomDoc</a>'d shell scripts and generate pretty documentation
from it.</p>

<p>TomDoc for shell? - Absolutely. Even though TomDoc was originally specified to
document Ruby code, it turns out to be a good fit for shell scripts too. Proof:</p>

<div class="highlight">
<pre><span class="c"># Public: Current API version in format "x.y.z".</span>
<span class="nb">export </span><span class="nv">API_VERSION</span><span class="o">=</span><span class="s2">"1.2.3"</span>

<span class="c"># Public: Execute commands in debug mode.</span>
<span class="c">#</span>
<span class="c"># Takes a single argument and evaluates it only when the test script is started</span>
<span class="c"># with --debug. This is primarily meant for use during the development of test</span>
<span class="c"># scripts.</span>
<span class="c">#</span>
<span class="c"># $1 - Commands to be executed.</span>
<span class="c">#</span>
<span class="c"># Examples</span>
<span class="c">#</span>
<span class="c">#   test_debug "cat some_log_file"</span>
<span class="c">#</span>
<span class="c"># Returns the exit code of the last command executed in debug mode or 0</span>
<span class="c">#   otherwise.</span>
test_debug<span class="o">()</span> <span class="o">{</span>
    <span class="nb">test</span> <span class="s2">"$debug"</span> <span class="o">=</span> <span class="s2">""</span> <span class="o">||</span> <span class="nb">eval</span> <span class="s2">"$1"</span>
<span class="o">}</span>
</pre>
</div>


<p>Passing the above to tomdoc.sh results in:</p>

<h3>API_VERSION</h3>

<pre><code>Public: Current API version in format "x.y.z".
</code></pre>

<h3>test_debug()</h3>

<pre><code>Public: Execute commands in debug mode.

Takes a single argument and evaluates it only when the test script is started
with --debug. This is primarily meant for use during the development of test
scripts.

$1 - Commands to be executed.

Examples

  test_debug "cat some_log_file"

Returns the exit code of the last command executed in debug mode or 0
  otherwise.
</code></pre>

<p>(end of generated markdown)</p>

<p>For maximum portability, tomdoc.sh was written in POSIX shell and only depends
on ubiquitous Unix tools like <code>sed(1)</code> and <code>grep(1)</code>.</p>

<p>The project was inspired by <a href="https://github.com/defunkt/tomdoc">tomdoc.rb</a>.</p>

<h2>Installation</h2>

<p>Installing tomdoc.sh is simple:</p>

<pre><code>$ git clone git://github.com/mlafeldt/tomdoc.sh.git
$ cd tomdoc.sh
$ make install
</code></pre>

<p>That will install tomdoc.sh to <code>$HOME/bin</code> by default. For a different target
directory, set <code>bindir</code> accordingly, e.g.</p>

<pre><code># make install bindir=/usr/local/bin
</code></pre>

<h2>Usage</h2>

<pre><code>Usage: tomdoc.sh [options] [--] [&lt;shell-script&gt;...]

    -h, --help               show help text
    --version                show version
    -t, --text               produce plain text (default format)
    -m, --markdown           produce markdown
    -a, --access &lt;level&gt;     filter by access level
</code></pre>

<p>For each TomDoc'd shell script you pass to tomdoc.sh, it will produce pretty
documentation in plain text (option <code>--text</code>, the default) or markdown format
(<code>--markdown</code>), writing the results to the standard output.</p>

<p>With <code>--access</code>, output can be limited to shell functions and variables
documented as "Public", "Internal", or "Deprecated".</p>

<p>The <code>&lt;shell-script&gt;</code> operands are processed in command-line order. If
<code>&lt;shell-script&gt;</code> is a single dash (-) or absent, tomdoc.sh reads from the
standard input.</p>

<p>For testing, you can run tomdoc.sh on itself:</p>

<pre><code>$ ./tomdoc.sh --text tomdoc.sh
$ ./tomdoc.sh --markdown tomdoc.sh
</code></pre>

<p>The generated output can be seen <a href="https://github.com/mlafeldt/tomdoc.sh/tree/master/test/fixtures">here</a>.</p>

<h2>Tests</h2>

<p>The <code>test</code> folder contains some automated test scripts powered by <a href="https://github.com/mlafeldt/Sharness">Sharness</a>.</p>

<p>You can run the tests this way:</p>

<pre><code>$ make test
</code></pre>

<h2>License</h2>

<ul>
<li>tomdoc.sh is licensed under the terms of the MIT License. See <a href="https://github.com/mlafeldt/tomdoc.sh/blob/master/LICENSE">LICENSE</a> file.</li>
<li>
<a href="https://github.com/mlafeldt/Sharness">Sharness</a> and all tests are licensed under the terms of the GNU General
Public License version 2 or higher. See file <a href="https://github.com/mlafeldt/tomdoc.sh/blob/master/test/COPYING">COPYING</a> for full license text.</li>
</ul><h2>Contact</h2>

<ul>
<li>Web: <a href="https://github.com/mlafeldt/tomdoc.sh">https://github.com/mlafeldt/tomdoc.sh</a>
</li>
<li>Mail: <a href="mailto:mathias.lafeldt@gmail.com">mathias.lafeldt@gmail.com</a>
</li>
<li>Twitter: <a href="https://twitter.com/mlafeldt">@mlafeldt</a>
</li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
		
  </body>
</html>